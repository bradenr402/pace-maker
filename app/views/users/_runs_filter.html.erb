<div class="mb-24">
  <div class="mt-10 mb-6 pb-6 border-b dark:border-slate-700 space-y-2">
    <h1 id="runs_title" class="heading">Filter Runs</h1>
    <p class="text-slate-700 dark:text-slate-400">Filter <%= user == current_user ? 'your runs' : 'runs for this user' %> by date.</p>
  </div>

  <%= form_with url: user_path(user), method: :get, local: true, html: { novalidate: true }, data: { turbo_frame: 'runs', controller: 'custom-date-range form-validation' } do %>
    <div class="form-group">
      <%= label_tag :run_date_range, 'Select date range', class: 'form-label' %>
      <%= select_tag :run_date_range, options_for_select(['This week', 'Last week', 'This month', 'Last month', 'Custom range'], params[:run_date_range]), data: { custom_date_range_target: 'select', action: 'custom-date-range#update' }, class: 'form-select' %>
    </div>
    <div class="form-group hidden" data-custom-date-range-target="startDate">
      <%= label_tag :run_start_date, 'Start date', class: 'form-label' %>
      <%= date_field_tag :run_start_date, nil, max: Date.yesterday, class: 'form-input', data: { form_validation_target: "runStartDate", action: "input->form-validation#validateRunEndDate" } %>
    </div>
    <div class="form-group hidden" data-custom-date-range-target="endDate">
      <%= label_tag :run_end_date, 'End date', class: 'form-label' %>
      <%= date_field_tag :run_end_date, nil, max: Date.today, class: 'form-input', data: { form_validation_target: "runEndDate", action: "input->form-validation#validateRunEndDate" } %>
      <span class="error-message hidden my-1" data-form-validation-target="runEndDateError">End date must be today or earlier and must be after start date</span>
    </div>
    <%= submit_tag 'Apply', class: 'btn btn-primary' %>
  <% end %>
</div>

<%= turbo_frame_tag 'runs' do %>
  <div class="mt-10 pb-6 border-b dark:border-slate-700 space-y-2">
    <h1 class="heading">Runs <%= @date_range.titlecase %></h1>
  </div>
  <div class="divide-y dark:divide-slate-700 dark:text-slate-700 mb-10">
    <% if @runs.any? %>
        <%= render @runs %>
    <% else %>
      <div class="flex flex-col gap-6 items-center justify-center py-12">
        <p class="prose dark:prose-invert text-slate-700 dark:text-slate-400">No runs found for the selected date range.</p>
      </div>
    <% end %>
  </div>
<% end %>
