<div class="flex items-center justify-between">
  <div>
    <p class="subheading"><%= link_to team.name, team, class: 'hover:text-indigo-700 transition ease-in-out duration-300' %></p>
    <p class="help-text"><%= team.owner.username %></p>
    <% if team.season_dates? %>
      <% if team.season_start_date.after?(Date.today) %>
        <p class="text-slate-700 dark:text-slate-400 text-sm mt-1">Season starts <%= pretty_date(team.season_start_date) %></p>
      <% else %>
        <p class="text-slate-700 dark:text-slate-400 text-sm mt-1">Season started <%= pretty_date(team.season_start_date) %></p>
      <% end %>
    <% end %>
  </div>
  <% if current_user == team.owner %>
    <%= link_to 'Edit team', edit_team_path(team), class: 'btn btn-white' %>
  <% else %>
    <% if current_user.member_of?(team) %>
      <%= button_to 'Leave team', leave_team_path(team), class: 'btn btn-destructive' %>
    <% else %>
      <% request = team.team_join_requests.find_by(user_id: current_user.id) %>
      <% if request.nil? %>
        <%= button_to 'Join team', join_team_path(team), class: 'btn btn-primary' %>
      <% elsif request.pending? %>
        <%= button_to 'Cancel request', cancel_request_path(request), method: :delete, class: 'btn btn-destructive' %>
      <% elsif request.rejected? %>
        <p>Sorry, <%= team.owner.username %> rejected your join request.</p>
      <% end %>
    <% end %>
  <% end %>
</div>
